sudo: required
dist: bionic
language: java
services:
- docker
jdk:
- openjdk11
env:
  global:
  - DOCKER_IMAGE=bcesnik/rso-image-uploader:1.0.0-SNAPSHOT-$TRAVIS_JOB_NUMBER
  - secure: VR/QIonUEvLDIRz91DdXL6xu6dcDJW2dqDH1cJp+vrtx5061wzC0NGO5oXFA1DUDCwZLi4DXfGhM37DrPvJFy5U1s1MwNjacsltbg6f87LXwX3q7xbH27WYceMF9l6rGPRGkKG1eCVDHW8X9zk0OJP4FUGFPy2ev/rpWL8s0DVB21ZdxFU+r1P4yczFPfcYO+uk/Q/eeV+liNiEQXdHafHwKedL2Zn/UIfRDT10cAeHvK/zuMUl5ZBbTkkUxzCPpkb8QEtwlr9zmcK8nHaP984Q8shDQLc6vlufKQ60MhiJEuVYOcQXgkjIbxXPent72GJvjCwPzJbKduilJRvMJj5ehfw719YVAWUOOL21V1KDKETITJNomH5Eg5pFL2RxLE2W3vLhSbIjcrjAC6CPYHePebQ8YWv598v1mxVDGlKKaCSUAPLAnHfiDBoQqZuzRDa0bzdrEKaRGiFn+tIZyJ9zKMMgQ0HfC6+Lz6UHuJ3inh72aLME2gVBVBOfTzEJvpfGjRDy49MfvZp76H1nI5QmmyoH8T4BIBSJC+lae7LMzKvMSDMoGthYQV2W7i2iyi932Mc2czFyFfmp8oIyAPXyKzEcbJN7MB7kroxxAigu5ryV7yG4J96+PKpBPkLSjl0MjYMspEZvlPoIICbFZcmuGSMo16+BVTeTsSmQqPRw=
  - secure: dB9HZQVVQQksSkAkHP10oVwCtw7N2bwozjA7im1x5tgQABQimMWtXR9KG+KNU5JDIZaViO0aI25NTqqMSpbmUC1MO+NZTbJphN3UpjsznxIm2bGJeTx++k/qkDhShx9YykVzANaTEPBA2P0TeOj3UsMSqhTLwiq2ct0PKYHOZiiogbUscmwLiq3IarUCD74asfIqKeubEbQk7FPs3cCbmNstSbVnG+qlrxbQF2QrDTXkUfChqvxSsjpkAHdRP5igH6TdgApHLBj8iPyisccJ5poIB2U77fnszhGALcon3Ptu+X2CsaaHMGE6jz3ssO00WEBUR73SJyBHZklgDZ6wPgnRyoaIHAB2RnhKCA375n6kibEFn6ZF2vFH/QyMqC4x8cTraU4fJIL7/YzoIOeLcZdREc34lHW9kvmzvpmb4XUM29iRo2VGEbfO1ywHXBjlT0fpt9gMihfXVGsPPWldmZmdhXFdPvEo/+YykYVAwO15Ap7YH9WfmHPgZoegCg0g7VO93kfSq0SUryqTszM90tPf9ymu++n4h5cOe7clGYf1xNlbweEoye+fzpny0o4/op/ul6IgVAw1PSFE3kLC1TFm6V+h1FXW2o+nIFDLIpXdP991HyottBCLjSF6o9PpSp0qUc+dIEe465IKHf/vGinoA7+gOpmKcfn5rjFKMHw=
cache:
  directories:
  - "$HOME/.m2"
script:
- mvn clean package -U
- docker build -t "$DOCKER_IMAGE" .
after_success:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
- docker push "$DOCKER_IMAGE"
